{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/callbacks.js","pingpp.js","src/channels/alipay_pc_direct.js","src/channels/alipay_wap.js","src/channels/bfb_wap.js","src/channels/commons/redirect_base.js","src/channels/cp_b2b.js","src/channels/fqlpay_qr.js","src/channels/isv_wap.js","src/channels/jdpay_wap.js","src/channels/qpay_pub.js","src/channels/upacp_pc.js","src/channels/upacp_wap.js","src/channels/wx_lite.js","src/channels/wx_pub.js","src/channels/wx_wap.js","src/channels/yeepay_wap.js","src/collection.js","src/init.js","src/libs/md5.js","src/main.js","src/mods.js","src/payment_elements.js","src/stash.js","src/testmode.js","src/utils.js","src/version.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pingpp","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","payment_elements","userCallback","undefined","innerCallback","result","err","error","clear","msg","extra","./payment_elements.js","2","utils","hasOwn","hasOwnProperty","ALIPAY_PC_DIRECT_URL","handleCharge","charge","channel","credential","baseURL","channel_url","service","_input_charset","query","stringifyData","redirectTo","../utils","3","mods","ALIPAY_WAP_URL_OLD","ALIPAY_WAP_URL","targetURL","ap","getExtraModule","inWeixin","pay","../mods","4","callbacks","url","../callbacks","5","../../callbacks","../../utils","6","CP_B2B_URL","formSubmit","7","redirectBase","./commons/redirect_base","8","arguments","apply","dup","9","pay_channel","inAlipay","10","JDPAY_WAP_URL_OLD","JDPAY_H5_URL","JDPAY_PC_URL","request_url","channelUrl","11","stash","SRC_URL","ID","tokenId","token_id","loadUrlJs","callpay","mqq","QQVersion","tenpay","resultCode","retmsg","../stash","12","UPACP_PC_URL","13","UPACP_WAP_URL","14","fields","k","jsApiParameters","wxLiteEnabled","wx","requestPayment","console","log","wx_lite","appId","complete","res","errMsg","err_code","err_desc","runTestMode","showModal","title","content","15","PINGPP_NOTIFY_URL_BASE","wx_jssdk","jssdkEnabled","WeixinJSBridge","eventCallback","jsApiCall","document","addEventListener","attachEvent","invoke","err_msg","dopay","confirm","path","or_id","id","request","data","status","16","17","YEEPAY_WAP_URL","YEEPAY_WAP_TEST_URL","mode","18","md5","collection","seperator","limit","report_url","timeout","getParam","str","param","reg","RegExp","substr","match","unescape","getUserAgent","navigator","userAgent","getHost","location","host","store","obj","localStorage","_this","reportData","app_id","ch_id","type","user_agent","time","Date","getTime","puid","reportStr","statsToSave","getItem","setItem","send","pppOneStats","split","origin","token","join","push","removeItem","X-Pingpp-Report-Token","report","setTimeout","./libs/md5","./stash","./utils","19","dc","init","documentReady","initPuid","randomString","getElementById","iframe","createElement","src","style","display","body","appendChild","./collection","20","safe_add","x","y","lsw","msw","bit_rol","num","cnt","md5_cmn","q","b","md5_ff","c","d","md5_gg","md5_hh","md5_ii","binl_md5","len","olda","oldb","oldc","oldd","binl2rstr","input","output","String","fromCharCode","rstr2binl","charCodeAt","rstr_md5","rstr_hmac_md5","key","hash","bkey","ipad","opad","concat","rstr2hex","hex_tab","charAt","str2rstr_utf8","encodeURIComponent","raw_md5","hex_md5","raw_hmac_md5","hex_hmac_md5","string","raw","21","version","v","testmode","PingppSDK","prototype","createPayment","chargeJSON","callback","signature","debug","app","channelModule","getChannelModule","livemode","setAPURL","APURL","./callbacks","./init","./mods","./payment_elements","./testmode","./version","22","channels","alipay_pc_direct","alipay_wap","bfb_wap","cp_b2b","fqlpay_qr","fqlpay_wap","isv_wap","jdpay_wap","qpay_pub","upacp_pc","upacp_wap","wx_pub","wx_wap","yeepay_wap","extras","name","./channels/alipay_pc_direct","./channels/alipay_wap","./channels/bfb_wap","./channels/cp_b2b","./channels/fqlpay_qr","./channels/fqlpay_wap","./channels/isv_wap","./channels/jdpay_wap","./channels/qpay_pub","./channels/upacp_pc","./channels/upacp_wap","./channels/wx_lite","./channels/wx_pub","./channels/wx_wap","./channels/yeepay_wap","23","order_no","time_expire","charge_or_order","JSON","parse","object","merchant_order_no","charge_essentials","24","25","PINGPP_MOCK_URL","params","scheme","orderNo","timeExpire","stringify","26","urlencode","method","requestData","successCallback","errorCallback","headers","XMLHttpRequest","xhr","toUpperCase","open","setRequestHeader","onreadystatechange","readyState","responseText","onerror","form","setAttribute","hiddenField","submit","chars","maxPos","Math","floor","random","href","ua","toLowerCase","indexOf","fn","sid","jsurl","nodeHead","getElementsByTagName","nodeScript","async","onload","ready","27"],"mappings":"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","file":"pingpp.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var payment_elements = require('./payment_elements.js');\r\nmodule.exports = {\r\n\r\n  userCallback: undefined,\r\n\r\n  innerCallback: function(result, err) {\r\n    if (typeof this.userCallback === 'function') {\r\n      if (typeof err === 'undefined') {\r\n        err = this.error();\r\n      }\r\n      this.userCallback(result, err);\r\n      this.userCallback = undefined;\r\n      payment_elements.clear();\r\n    }\r\n  },\r\n\r\n  error: function(msg, extra) {\r\n    msg = (typeof msg === 'undefined') ? '' : msg;\r\n    extra = (typeof extra === 'undefined') ? '' : extra;\r\n    return {\r\n      msg: msg,\r\n      extra: extra\r\n    };\r\n  }\r\n};\r\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.pingpp = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nvar payment_elements = require('./payment_elements.js');\r\nmodule.exports = {\r\n\r\n  userCallback: undefined,\r\n\r\n  innerCallback: function(result, err) {\r\n    if (typeof this.userCallback === 'function') {\r\n      if (typeof err === 'undefined') {\r\n        err = this.error();\r\n      }\r\n      this.userCallback(result, err);\r\n      this.userCallback = undefined;\r\n      payment_elements.clear();\r\n    }\r\n  },\r\n\r\n  error: function(msg, extra) {\r\n    msg = (typeof msg === 'undefined') ? '' : msg;\r\n    extra = (typeof extra === 'undefined') ? '' : extra;\r\n    return {\r\n      msg: msg,\r\n      extra: extra\r\n    };\r\n  }\r\n};\r\n\n},{\"./payment_elements.js\":23}],2:[function(require,module,exports){\nvar utils = require('../utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  ALIPAY_PC_DIRECT_URL: 'https://mapi.alipay.com/gateway.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n    var baseURL = this.ALIPAY_PC_DIRECT_URL;\r\n    if (hasOwn.call(credential, 'channel_url')) {\r\n      baseURL = credential.channel_url;\r\n    }\r\n    if (!hasOwn.call(credential, '_input_charset')) {\r\n      if(hasOwn.call(credential, 'service')\r\n        && credential.service === 'alipay.wap.create.direct.pay.by.user') {\r\n        credential._input_charset = 'utf-8';\r\n      }\r\n    }\r\n    var query = utils.stringifyData(credential, channel, true);\r\n    utils.redirectTo(baseURL + '?' + query);\r\n  }\r\n};\r\n\n},{\"../utils\":26}],3:[function(require,module,exports){\nvar utils = require('../utils');\r\nvar mods = require('../mods');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  ALIPAY_WAP_URL_OLD: 'https://wappaygw.alipay.com/service/rest.htm',\r\n  ALIPAY_WAP_URL: 'https://mapi.alipay.com/gateway.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n    var baseURL = this.ALIPAY_WAP_URL;\r\n    if (hasOwn.call(credential, 'req_data')) {\r\n      baseURL = this.ALIPAY_WAP_URL_OLD;\r\n    } else if (hasOwn.call(credential, 'channel_url')) {\r\n      baseURL = credential.channel_url;\r\n    }\r\n    if (!hasOwn.call(credential, '_input_charset')) {\r\n      if ((hasOwn.call(credential, 'service')\r\n          && credential.service === 'alipay.wap.create.direct.pay.by.user')\r\n        || hasOwn.call(credential, 'req_data')\r\n      ) {\r\n        credential._input_charset = 'utf-8';\r\n      }\r\n    }\r\n    var query = utils.stringifyData(credential, channel, true);\r\n    var targetURL = baseURL + '?' + query;\r\n    var ap = mods.getExtraModule('ap');\r\n    if (utils.inWeixin() && typeof ap !== 'undefined') {\r\n      ap.pay(targetURL);\r\n    } else {\r\n      utils.redirectTo(targetURL);\r\n    }\r\n  }\r\n};\r\n\n},{\"../mods\":22,\"../utils\":26}],4:[function(require,module,exports){\nvar utils = require('../utils');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n\r\n    if (!hasOwn.call(credential, 'url')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'missing_field:url'));\r\n      return;\r\n    }\r\n    utils.redirectTo(credential.url + '?' +\r\n      utils.stringifyData(credential, channel));\r\n  }\r\n};\r\n\n},{\"../callbacks\":1,\"../utils\":26}],5:[function(require,module,exports){\nvar utils = require('../../utils');\r\nvar callbacks = require('../../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var targetURL;\r\n    if (typeof credential === 'string') {\r\n      targetURL = credential;\r\n    } else if (hasOwn.call(credential, 'url')) {\r\n      targetURL = credential.url;\r\n    } else {\r\n      callbacks.innerCallback('fail', callbacks.error('invalid_credential',\r\n        'credential format is incorrect'));\r\n      return;\r\n    }\r\n    utils.redirectTo(targetURL);\r\n  }\r\n};\r\n\n},{\"../../callbacks\":1,\"../../utils\":26}],6:[function(require,module,exports){\nvar utils = require('../utils');\r\n\r\nmodule.exports = {\r\n\r\n  CP_B2B_URL: 'https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    utils.formSubmit(this.CP_B2B_URL, 'post', credential);\r\n  }\r\n};\r\n\n},{\"../utils\":26}],7:[function(require,module,exports){\nvar redirectBase = require('./commons/redirect_base');\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    redirectBase.handleCharge(charge);\r\n  }\r\n};\r\n\n},{\"./commons/redirect_base\":5}],8:[function(require,module,exports){\narguments[4][7][0].apply(exports,arguments)\n},{\"./commons/redirect_base\":5,\"dup\":7}],9:[function(require,module,exports){\nvar redirectBase = require('./commons/redirect_base');\r\nvar callbacks = require('../callbacks');\r\nvar utils = require('../utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n  handleCharge: function (charge) {\r\n    var extra = charge.extra;\r\n    if (hasOwn.call(extra, 'pay_channel')) {\r\n      var pay_channel = extra.pay_channel;\r\n      if (pay_channel === 'wx' && !utils.inWeixin()) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('Not in the WeChat browser'));\r\n        return;\r\n      } else if (pay_channel === 'alipay' && !utils.inAlipay()) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('Not in the Alipay browser'));\r\n        return;\r\n      }\r\n    } else {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'charge 格式不正确'));\r\n      return;\r\n    }\r\n    redirectBase.handleCharge(charge);\r\n  }\r\n};\r\n\n},{\"../callbacks\":1,\"../utils\":26,\"./commons/redirect_base\":5}],10:[function(require,module,exports){\nvar utils = require('../utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  JDPAY_WAP_URL_OLD: 'https://m.jdpay.com/wepay/web/pay',\r\n  JDPAY_H5_URL: 'https://h5pay.jd.com/jdpay/saveOrder',\r\n  JDPAY_PC_URL: 'https://wepay.jd.com/jdpay/saveOrder',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var request_url = this.JDPAY_H5_URL;\r\n    if (hasOwn.call(credential, 'channelUrl')) {\r\n      request_url = credential.channelUrl;\r\n      delete credential.channelUrl;\r\n    } else if (hasOwn.call(credential, 'merchantRemark')) {\r\n      request_url = this.JDPAY_WAP_URL_OLD;\r\n    }\r\n    utils.formSubmit(request_url, 'post', credential);\r\n  }\r\n};\r\n\n},{\"../utils\":26}],11:[function(require,module,exports){\nvar callbacks = require('../callbacks');\r\nvar utils = require('../utils');\r\nvar stash = require('../stash');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\n/*global mqq*/\r\nmodule.exports = {\r\n  SRC_URL: 'https://open.mobile.qq.com/sdk/qqapi.js?_bid=152',\r\n  ID: 'mqq_api',\r\n\r\n  handleCharge: function (charge) {\r\n    var credential = charge.credential[charge.channel];\r\n\r\n    if (!hasOwn.call(credential, 'token_id')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'missing_token_id'));\r\n      return;\r\n    }\r\n\r\n    stash.tokenId = credential.token_id;\r\n    utils.loadUrlJs(this.ID, this.SRC_URL, this.callpay);\r\n  },\r\n\r\n  callpay: function () {\r\n    if (typeof mqq != 'undefined') {\r\n      if (mqq.QQVersion == 0) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('Not in the QQ client'));\r\n        delete stash.tokenId;\r\n        return;\r\n      }\r\n      mqq.tenpay.pay({\r\n        tokenId: stash.tokenId\r\n      }, function (result) {\r\n        if (result.resultCode == 0) {\r\n          callbacks.innerCallback('success');\r\n        } else {\r\n          callbacks.innerCallback('fail',\r\n            callbacks.error(result.retmsg));\r\n        }\r\n      });\r\n    } else {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('network_err'));\r\n    }\r\n    delete stash.tokenId;\r\n  }\r\n};\n},{\"../callbacks\":1,\"../stash\":24,\"../utils\":26}],12:[function(require,module,exports){\nvar utils = require('../utils');\r\n\r\nmodule.exports = {\r\n\r\n  UPACP_PC_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    utils.formSubmit(this.UPACP_PC_URL, 'post', credential);\r\n  }\r\n};\r\n\n},{\"../utils\":26}],13:[function(require,module,exports){\nvar utils = require('../utils');\r\n\r\nmodule.exports = {\r\n\r\n  UPACP_WAP_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    utils.formSubmit(this.UPACP_WAP_URL, 'post', credential);\r\n  }\r\n};\r\n\n},{\"../utils\":26}],14:[function(require,module,exports){\n/**\r\n * Created by yulitao on 2016/12/29.\r\n */\r\nvar stash = require('../stash');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n/*global wx*/\r\nmodule.exports = {\r\n\r\n  handleCharge: function (charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var fields = [\r\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\r\n    ];\r\n    for (var k = 0; k < fields.length; k++) {\r\n      if (!hasOwn.call(credential, fields[k])) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\r\n        return;\r\n      }\r\n    }\r\n    stash.jsApiParameters = credential;\r\n    this.callpay();\r\n  },\r\n\r\n  wxLiteEnabled: function () {\r\n    return typeof wx !== 'undefined' && wx.requestPayment;\r\n  },\r\n\r\n  //微信小程序支付\r\n  callpay: function () {\r\n    if (!this.wxLiteEnabled()) {\r\n      console.log('请在微信小程序中打开');\r\n      return;\r\n    }\r\n    var wx_lite = stash.jsApiParameters;\r\n    delete wx_lite.appId;\r\n    wx_lite.complete = function (res) {\r\n      //支付成功\r\n      if (res.errMsg === 'requestPayment:ok') {\r\n        callbacks.innerCallback('success');\r\n      }\r\n      //取消支付\r\n      if (res.errMsg === 'requestPayment:cancel') {\r\n        callbacks.innerCallback('cancel', callbacks.error('用户取消支付'));\r\n      }\r\n      //支付验证签名失败\r\n      if (res.err_code !== 'undefined' && res.err_desc !== 'undefined') {\r\n        callbacks.innerCallback('fail', callbacks.error(res.err_desc, res));\r\n      }\r\n    };\r\n    wx.requestPayment(wx_lite);\r\n  },\r\n\r\n  /* eslint-disable no-unused-vars */\r\n  runTestMode: function (url) {\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: '因 \"微信小程序\" 限制 域名的原因 暂不支持 模拟付款 请使用 livekey 获取 charge 进行支付'\r\n    });\r\n  }\r\n  /* eslint-enable no-unused-vars */\r\n};\r\n\n},{\"../callbacks\":1,\"../stash\":24}],15:[function(require,module,exports){\nvar callbacks = require('../callbacks');\r\nvar utils = require('../utils');\r\nvar stash = require('../stash');\r\nvar mods = require('../mods');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\n/*global WeixinJSBridge*/\r\nmodule.exports = {\r\n\r\n  PINGPP_NOTIFY_URL_BASE: 'https://api.pingxx.com/notify',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var fields = [\r\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\r\n    ];\r\n    for (var k = 0; k < fields.length; k++) {\r\n      if (!hasOwn.call(credential, fields[k])) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\r\n        return;\r\n      }\r\n    }\r\n    stash.jsApiParameters = credential;\r\n    this.callpay();\r\n  },\r\n\r\n  callpay: function() {\r\n    var self = this;\r\n    var wx_jssdk = mods.getExtraModule('wx_jssdk');\r\n    if (typeof wx_jssdk !== 'undefined' && wx_jssdk.jssdkEnabled()) {\r\n      wx_jssdk.callpay();\r\n    } else if (typeof WeixinJSBridge == 'undefined') {\r\n      var eventCallback = function() {\r\n        self.jsApiCall();\r\n      };\r\n      if (document.addEventListener) {\r\n        document.addEventListener('WeixinJSBridgeReady',\r\n          eventCallback, false);\r\n      } else if (document.attachEvent) {\r\n        document.attachEvent('WeixinJSBridgeReady', eventCallback);\r\n        document.attachEvent('onWeixinJSBridgeReady', eventCallback);\r\n      }\r\n    } else {\r\n      this.jsApiCall();\r\n    }\r\n  },\r\n\r\n  jsApiCall: function() {\r\n    if (hasOwn.call(stash, 'jsApiParameters')) {\r\n      WeixinJSBridge.invoke(\r\n        'getBrandWCPayRequest',\r\n        stash.jsApiParameters,\r\n        function(res) {\r\n          delete stash.jsApiParameters;\r\n          if (res.err_msg == 'get_brand_wcpay_request:ok') {\r\n            callbacks.innerCallback('success');\r\n          } else if (res.err_msg == 'get_brand_wcpay_request:cancel') {\r\n            callbacks.innerCallback('cancel');\r\n          } else {\r\n            callbacks.innerCallback('fail',\r\n              callbacks.error('wx_result_fail', res.err_msg));\r\n          }\r\n        }\r\n      );\r\n    }\r\n  },\r\n\r\n  runTestMode: function(charge) {\r\n    var dopay = confirm('模拟付款？');\r\n    if (dopay) {\r\n      var path = (charge.or_id === null ? '' : '/orders/' + charge.or_id)\r\n          + '/charges/' + charge.id;\r\n      utils.request(this.PINGPP_NOTIFY_URL_BASE + path + '?livemode=false',\r\n        'GET', null,\r\n        function(data, status) {\r\n          if (status >= 200 && status < 400 && data == 'success') {\r\n            callbacks.innerCallback('success');\r\n          } else {\r\n            var extra = 'http_code:' + status + ';response:' + data;\r\n            callbacks.innerCallback('fail',\r\n              callbacks.error('testmode_notify_fail', extra));\r\n          }\r\n        },\r\n        function() {\r\n          callbacks.innerCallback('fail', callbacks.error('network_err'));\r\n        });\r\n    }\r\n  }\r\n};\r\n\n},{\"../callbacks\":1,\"../mods\":22,\"../stash\":24,\"../utils\":26}],16:[function(require,module,exports){\nvar utils = require('../utils');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    if (typeof credential === 'string') {\r\n      utils.redirectTo(credential);\r\n    } else if (typeof credential === 'object'\r\n      && hasOwn.call(credential, 'url')\r\n    ) {\r\n      utils.redirectTo(credential.url);\r\n    } else {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'credential 格式不正确'));\r\n    }\r\n  }\r\n};\r\n\n},{\"../callbacks\":1,\"../utils\":26}],17:[function(require,module,exports){\nvar utils = require('../utils');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  YEEPAY_WAP_URL: 'https://ok.yeepay.com/paymobile/api/pay/request',\r\n  YEEPAY_WAP_TEST_URL: 'http://mobiletest.yeepay.com/paymobile/api/pay/request',\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n    var fields = ['merchantaccount', 'encryptkey', 'data'];\r\n    for (var k = 0; k < fields.length; k++) {\r\n      if (!hasOwn.call(credential, fields[k])) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\r\n        return;\r\n      }\r\n    }\r\n    var baseURL;\r\n    if (hasOwn.call(credential, 'mode') && credential.mode == 'test') {\r\n      baseURL = this.YEEPAY_WAP_TEST_URL;\r\n    } else {\r\n      baseURL = this.YEEPAY_WAP_URL;\r\n    }\r\n    utils.redirectTo(baseURL + '?' +\r\n      utils.stringifyData(credential, channel, true));\r\n  }\r\n};\r\n\n},{\"../callbacks\":1,\"../utils\":26}],18:[function(require,module,exports){\nvar utils = require('./utils');\r\nvar stash = require('./stash');\r\nvar md5 = require('./libs/md5');\r\n\r\nvar collection = {\r\n  seperator: '###',\r\n  limit: 1,\r\n  report_url: 'https://statistics.pingxx.com/one_stats',\r\n  timeout: 100\r\n};\r\nvar getParam = function(str, param) {\r\n  var reg = new RegExp('(^|&)' + param + '=([^&]*)(&|$)', 'i');\r\n  var r = str.substr(0).match(reg);\r\n  if (r !== null) return unescape(r[2]);\r\n  return null;\r\n};\r\nvar getUserAgent = function() {\r\n  return navigator.userAgent;\r\n};\r\nvar getHost = function() {\r\n  return window.location.host;\r\n};\r\n\r\ncollection.store = function(obj) {\r\n  if (typeof localStorage === 'undefined' || localStorage === null) return;\r\n  var _this = this;\r\n  var reportData = {};\r\n  reportData.app_id = obj.app_id || stash.app_id || 'app_not_defined';\r\n  reportData.ch_id = obj.ch_id || '';\r\n  reportData.channel = obj.channel || '';\r\n  reportData.type = obj.type || '';\r\n  reportData.user_agent = getUserAgent();\r\n  reportData.host = getHost();\r\n  reportData.time = new Date().getTime();\r\n  reportData.puid = stash.puid;\r\n\r\n  var reportStr = 'app_id=' + reportData.app_id +\r\n    '&channel=' + reportData.channel + '&ch_id=' + reportData.ch_id +\r\n    '&host=' + reportData.host + '&time=' + reportData.time +\r\n    '&type=' + reportData.type + '&user_agent=' + reportData.user_agent +\r\n    '&puid=' + reportData.puid;\r\n\r\n  var statsToSave = reportStr;\r\n  if (localStorage.getItem('PPP_ONE_STATS') !== null &&\r\n    localStorage.getItem('PPP_ONE_STATS').length !== 0\r\n  ) {\r\n    statsToSave = localStorage.getItem('PPP_ONE_STATS') +\r\n      _this.seperator + reportStr;\r\n  }\r\n  try {\r\n    localStorage.setItem('PPP_ONE_STATS', statsToSave);\r\n  } catch (e) {\r\n    /* empty */\r\n  }\r\n};\r\n\r\ncollection.send = function() {\r\n  if (typeof localStorage === 'undefined' || localStorage === null) return;\r\n  var _this = this;\r\n  var pppOneStats = localStorage.getItem('PPP_ONE_STATS');\r\n  if (pppOneStats === null ||\r\n    pppOneStats.split(_this.seperator).length < _this.limit) {\r\n    return;\r\n  }\r\n  try {\r\n    var data = [];\r\n    var origin = pppOneStats.split(_this.seperator);\r\n    var token = md5(origin.join('&'));\r\n\r\n    for (var i = 0; i < origin.length; i++) {\r\n      data.push({\r\n        app_id: getParam(origin[i], 'app_id'),\r\n        channel: getParam(origin[i], 'channel'),\r\n        ch_id: getParam(origin[i], 'ch_id'),\r\n        host: getParam(origin[i], 'host'),\r\n        time: getParam(origin[i], 'time'),\r\n        type: getParam(origin[i], 'type'),\r\n        user_agent: getParam(origin[i], 'user_agent'),\r\n        puid: getParam(origin[i], 'puid')\r\n      });\r\n    }\r\n\r\n    utils.request(_this.report_url, 'POST', data, function(data, status) {\r\n      if (status == 200) {\r\n        localStorage.removeItem('PPP_ONE_STATS');\r\n      }\r\n    }, undefined, {\r\n      'X-Pingpp-Report-Token': token\r\n    });\r\n  } catch (e) {\r\n    /* empty */\r\n  }\r\n};\r\n\r\ncollection.report = function(obj) {\r\n  var _this = this;\r\n  _this.store(obj);\r\n  setTimeout(function(){\r\n    _this.send();\r\n  }, _this.timeout);\r\n};\r\n\r\nmodule.exports = collection;\r\n\n},{\"./libs/md5\":20,\"./stash\":24,\"./utils\":26}],19:[function(require,module,exports){\nvar stash = require('./stash');\r\nvar utils = require('./utils');\r\nvar dc = require('./collection');\r\n\r\nmodule.exports = {\r\n  SRC_URL: 'https://cookie.pingxx.com',\r\n\r\n  init: function() {\r\n    var self = this;\r\n    utils.documentReady(function(){\r\n      self.initPuid();\r\n    });\r\n  },\r\n\r\n  initPuid: function() {\r\n    if (typeof window === 'undefined' || typeof localStorage === 'undefined'\r\n        || localStorage === null) {\r\n      return;\r\n    }\r\n    var puid = localStorage.getItem('pingpp_uid');\r\n    if (puid === null) {\r\n      puid = utils.randomString();\r\n      try {\r\n        localStorage.setItem('pingpp_uid', puid);\r\n      } catch (e) {\r\n        /* empty */\r\n      }\r\n    }\r\n    stash.puid = puid;\r\n    if (!document.getElementById('p_analyse_iframe')) {\r\n      var iframe;\r\n      try {\r\n        iframe = document.createElement('iframe');\r\n      }catch(e){\r\n        iframe = document.createElement('<iframe name=\"ifr\"></iframe>');\r\n      }\r\n      iframe.id = 'p_analyse_iframe';\r\n      iframe.src = this.SRC_URL + '/?puid=' + puid;\r\n      iframe.style.display = 'none';\r\n      document.body.appendChild(iframe);\r\n    }\r\n    setTimeout(function() {\r\n      dc.send();\r\n    }, 0);\r\n  }\r\n};\r\n\n},{\"./collection\":18,\"./stash\":24,\"./utils\":26}],20:[function(require,module,exports){\n/*\r\n * JavaScript MD5\r\n * https://github.com/blueimp/JavaScript-MD5\r\n *\r\n * Copyright 2011, Sebastian Tschan\r\n * https://blueimp.net\r\n *\r\n * Licensed under the MIT license:\r\n * http://www.opensource.org/licenses/MIT\r\n *\r\n * Based on\r\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\r\n * Digest Algorithm, as defined in RFC 1321.\r\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\r\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\r\n * Distributed under the BSD License\r\n * See http://pajhome.org.uk/crypt/md5 for more info.\r\n */\r\n\r\n/* global unescape, module */\r\n\r\n(function () {\r\n  /*\r\n  * Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n  * to work around bugs in some JS interpreters.\r\n  */\r\n  function safe_add (x, y) {\r\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n    return (msw << 16) | (lsw & 0xFFFF);\r\n  }\r\n\r\n  /*\r\n  * Bitwise rotate a 32-bit number to the left.\r\n  */\r\n  function bit_rol (num, cnt) {\r\n    return (num << cnt) | (num >>> (32 - cnt));\r\n  }\r\n\r\n  /*\r\n  * These functions implement the four basic operations the algorithm uses.\r\n  */\r\n  function md5_cmn (q, a, b, x, s, t) {\r\n    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\r\n  }\r\n  function md5_ff (a, b, c, d, x, s, t) {\r\n    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n  }\r\n  function md5_gg (a, b, c, d, x, s, t) {\r\n    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n  }\r\n  function md5_hh (a, b, c, d, x, s, t) {\r\n    return md5_cmn(b ^ c ^ d, a, b, x, s, t);\r\n  }\r\n  function md5_ii (a, b, c, d, x, s, t) {\r\n    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n  }\r\n\r\n  /*\r\n  * Calculate the MD5 of an array of little-endian words, and a bit length.\r\n  */\r\n  function binl_md5 (x, len) {\r\n    /* append padding */\r\n    x[len >> 5] |= 0x80 << (len % 32);\r\n    x[(((len + 64) >>> 9) << 4) + 14] = len;\r\n\r\n    var i;\r\n    var olda;\r\n    var oldb;\r\n    var oldc;\r\n    var oldd;\r\n    var a = 1732584193;\r\n    var b = -271733879;\r\n    var c = -1732584194;\r\n    var d = 271733878;\r\n\r\n    for (i = 0; i < x.length; i += 16) {\r\n      olda = a;\r\n      oldb = b;\r\n      oldc = c;\r\n      oldd = d;\r\n\r\n      a = md5_ff(a, b, c, d, x[i], 7, -680876936);\r\n      d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n      c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n      b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n      a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n      d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n      c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n      b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n      a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n      d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n      c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\r\n      b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n      a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n      d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n      c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n      b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\r\n      a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n      d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n      c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n      b = md5_gg(b, c, d, a, x[i], 20, -373897302);\r\n      a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n      d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n      c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n      b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n      a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n      d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n      c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n      b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n      a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n      d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n      c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n      b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\r\n      a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\r\n      d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n      c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n      b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n      a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n      d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n      c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n      b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n      a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n      d = md5_hh(d, a, b, c, x[i], 11, -358537222);\r\n      c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n      b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n      a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n      d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n      c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n      b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\r\n      a = md5_ii(a, b, c, d, x[i], 6, -198630844);\r\n      d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n      c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n      b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n      a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n      d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n      c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n      b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n      a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n      d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n      c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n      b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n      a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n      d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n      c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n      b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\r\n      a = safe_add(a, olda);\r\n      b = safe_add(b, oldb);\r\n      c = safe_add(c, oldc);\r\n      d = safe_add(d, oldd);\r\n    }\r\n    return [a, b, c, d];\r\n  }\r\n\r\n  /*\r\n  * Convert an array of little-endian words to a string\r\n  */\r\n  function binl2rstr (input) {\r\n    var i;\r\n    var output = '';\r\n    for (i = 0; i < input.length * 32; i += 8) {\r\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /*\r\n  * Convert a raw string to an array of little-endian words\r\n  * Characters >255 have their high-byte silently ignored.\r\n  */\r\n  function rstr2binl (input) {\r\n    var i;\r\n    var output = [];\r\n    output[(input.length >> 2) - 1] = undefined;\r\n    for (i = 0; i < output.length; i += 1) {\r\n      output[i] = 0;\r\n    }\r\n    for (i = 0; i < input.length * 8; i += 8) {\r\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /*\r\n  * Calculate the MD5 of a raw string\r\n  */\r\n  function rstr_md5 (s) {\r\n    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\r\n  }\r\n\r\n  /*\r\n  * Calculate the HMAC-MD5, of a key and some data (raw strings)\r\n  */\r\n  function rstr_hmac_md5 (key, data) {\r\n    var i;\r\n    var bkey = rstr2binl(key);\r\n    var ipad = [];\r\n    var opad = [];\r\n    var hash;\r\n    ipad[15] = opad[15] = undefined;\r\n    if (bkey.length > 16) {\r\n      bkey = binl_md5(bkey, key.length * 8);\r\n    }\r\n    for (i = 0; i < 16; i += 1) {\r\n      ipad[i] = bkey[i] ^ 0x36363636;\r\n      opad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n    }\r\n    hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\r\n    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\r\n  }\r\n\r\n  /*\r\n  * Convert a raw string to a hex string\r\n  */\r\n  function rstr2hex (input) {\r\n    var hex_tab = '0123456789abcdef';\r\n    var output = '';\r\n    var x;\r\n    var i;\r\n    for (i = 0; i < input.length; i += 1) {\r\n      x = input.charCodeAt(i);\r\n      output += hex_tab.charAt((x >>> 4) & 0x0F) +\r\n      hex_tab.charAt(x & 0x0F);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /*\r\n  * Encode a string as utf-8\r\n  */\r\n  function str2rstr_utf8 (input) {\r\n    return unescape(encodeURIComponent(input));\r\n  }\r\n\r\n  /*\r\n  * Take string arguments and return either raw or hex encoded strings\r\n  */\r\n  function raw_md5 (s) {\r\n    return rstr_md5(str2rstr_utf8(s));\r\n  }\r\n  function hex_md5 (s) {\r\n    return rstr2hex(raw_md5(s));\r\n  }\r\n  function raw_hmac_md5 (k, d) {\r\n    return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));\r\n  }\r\n  function hex_hmac_md5 (k, d) {\r\n    return rstr2hex(raw_hmac_md5(k, d));\r\n  }\r\n\r\n  function md5 (string, key, raw) {\r\n    if (!key) {\r\n      if (!raw) {\r\n        return hex_md5(string);\r\n      }\r\n      return raw_md5(string);\r\n    }\r\n    if (!raw) {\r\n      return hex_hmac_md5(key, string);\r\n    }\r\n    return raw_hmac_md5(key, string);\r\n  }\r\n\r\n  module.exports = md5;\r\n}());\r\n\n},{}],21:[function(require,module,exports){\nvar version = require('./version').v;\r\nvar testmode = require('./testmode');\r\nvar callbacks = require('./callbacks');\r\nvar mods = require('./mods');\r\nvar stash = require('./stash');\r\nvar dc = require('./collection');\r\nvar payment_elements = require('./payment_elements');\r\n\r\nvar hasOwn = {}.hasOwnProperty;\r\nvar PingppSDK = function () {\r\n  require('./init').init();\r\n};\r\n\r\nPingppSDK.prototype = {\r\n\r\n  version: version,\r\n\r\n  createPayment: function (chargeJSON, callback, signature, debug) {\r\n    if (typeof callback === 'function') {\r\n      callbacks.userCallback = callback;\r\n    }\r\n\r\n    payment_elements.init(chargeJSON);\r\n\r\n    if (!hasOwn.call(payment_elements, 'id')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_charge_id'));\r\n      return;\r\n    }\r\n    if (!hasOwn.call(payment_elements, 'channel')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_channel'));\r\n      return;\r\n    }\r\n    if (hasOwn.call(payment_elements, 'app')) {\r\n      if (typeof payment_elements.app === 'string') {\r\n        stash.app_id = payment_elements.app;\r\n      } else if (typeof payment_elements.app === 'object' &&\r\n        typeof payment_elements.app.id === 'string') {\r\n        stash.app_id = payment_elements.app.id;\r\n      }\r\n    }\r\n    dc.report({\r\n      type: 'pure_sdk_click',\r\n      channel: payment_elements.channel,\r\n      ch_id: payment_elements.id\r\n    });\r\n    var channel = payment_elements.channel;\r\n    if (!hasOwn.call(payment_elements, 'credential')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_credential'));\r\n      return;\r\n    }\r\n    if (!payment_elements.credential) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'credential_is_undefined'));\r\n      return;\r\n    }\r\n    if (!hasOwn.call(payment_elements.credential, channel)) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'credential_is_incorrect'));\r\n      return;\r\n    }\r\n    if (!hasOwn.call(payment_elements, 'livemode')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_livemode_field'));\r\n      return;\r\n    }\r\n    var channelModule = mods.getChannelModule(channel);\r\n    if (typeof channelModule === 'undefined') {\r\n      console.error('channel module \"' + channel + '\" is undefined');\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_channel',\r\n          'channel module \"' + channel + '\" is undefined')\r\n      );\r\n      return;\r\n    }\r\n    if (payment_elements.livemode === false) {\r\n      if (hasOwn.call(channelModule, 'runTestMode')) {\r\n        channelModule.runTestMode(payment_elements);\r\n      } else {\r\n        testmode.runTestMode(payment_elements);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (typeof signature != 'undefined') {\r\n      stash.signature = signature;\r\n    }\r\n    if (typeof debug == 'boolean') {\r\n      stash.debug = debug;\r\n    }\r\n    channelModule.handleCharge(payment_elements);\r\n  },\r\n\r\n  setAPURL: function (url) {\r\n    stash.APURL = url;\r\n  }\r\n};\r\n\r\nmodule.exports = new PingppSDK();\r\n\n},{\"./callbacks\":1,\"./collection\":18,\"./init\":19,\"./mods\":22,\"./payment_elements\":23,\"./stash\":24,\"./testmode\":25,\"./version\":27}],22:[function(require,module,exports){\nvar hasOwn = {}.hasOwnProperty;\r\nvar mods = {};\r\nmodule.exports = mods;\r\n\r\nmods.channels = {\r\n  alipay_pc_direct: require('./channels/alipay_pc_direct'),\n  alipay_wap: require('./channels/alipay_wap'),\n  bfb_wap: require('./channels/bfb_wap'),\n  cp_b2b: require('./channels/cp_b2b'),\n  fqlpay_qr: require('./channels/fqlpay_qr'),\n  fqlpay_wap: require('./channels/fqlpay_wap'),\n  isv_wap: require('./channels/isv_wap'),\n  jdpay_wap: require('./channels/jdpay_wap'),\n  qpay_pub: require('./channels/qpay_pub'),\n  upacp_pc: require('./channels/upacp_pc'),\n  upacp_wap: require('./channels/upacp_wap'),\n  wx_lite: require('./channels/wx_lite'),\n  wx_pub: require('./channels/wx_pub'),\n  wx_wap: require('./channels/wx_wap'),\n  yeepay_wap: require('./channels/yeepay_wap')\r\n};\r\n\r\nmods.extras = {\r\n\r\n};\r\n\r\nmods.getChannelModule = function(channel) {\r\n  if (hasOwn.call(mods.channels, channel)) {\r\n    return mods.channels[channel];\r\n  }\r\n  return undefined;\r\n};\r\n\r\nmods.getExtraModule = function(name) {\r\n  if (hasOwn.call(mods.extras, name)) {\r\n    return mods.extras[name];\r\n  }\r\n  return undefined;\r\n};\r\n\n},{\"./channels/alipay_pc_direct\":2,\"./channels/alipay_wap\":3,\"./channels/bfb_wap\":4,\"./channels/cp_b2b\":6,\"./channels/fqlpay_qr\":7,\"./channels/fqlpay_wap\":8,\"./channels/isv_wap\":9,\"./channels/jdpay_wap\":10,\"./channels/qpay_pub\":11,\"./channels/upacp_pc\":12,\"./channels/upacp_wap\":13,\"./channels/wx_lite\":14,\"./channels/wx_pub\":15,\"./channels/wx_wap\":16,\"./channels/yeepay_wap\":17}],23:[function(require,module,exports){\n/**\r\n * Created by dong on 2016/12/30.\r\n */\r\n\r\nvar callbacks = require('./callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n  id: null,\r\n  or_id: null,\r\n  channel: null,\r\n  app: null,\r\n  credential: {},\r\n  extra: null,\r\n  livemode: null,\r\n  order_no: null,\r\n  time_expire: null,\r\n\r\n  init: function (charge_or_order) {\r\n    var charge;\r\n    if (typeof charge_or_order === 'string') {\r\n      try {\r\n        charge = JSON.parse(charge_or_order);\r\n      } catch (err) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('json_decode_fail', err));\r\n        return;\r\n      }\r\n    } else {\r\n      charge = charge_or_order;\r\n    }\r\n\r\n    if (typeof charge === 'undefined') {\r\n      callbacks.innerCallback('fail', callbacks.error('json_decode_fail'));\r\n      return;\r\n    }\r\n\r\n    if (hasOwn.call(charge, 'object') && charge.object == 'order') {\r\n      charge.or_id = charge.id;\r\n      charge.id = charge.charge;\r\n      charge.order_no = charge.merchant_order_no;\r\n      var charge_essentials = charge.charge_essentials;\r\n      charge.channel = charge_essentials.channel;\r\n      charge.credential = charge_essentials.credential;\r\n      charge.extra = charge_essentials.extra;\r\n    }\r\n\r\n    for (var key in this) {\r\n      if (hasOwn.call(charge, key)) {\r\n        this[key] = charge[key];\r\n      }\r\n    }\r\n    return this;\r\n  },\r\n\r\n  clear: function () {\r\n    for (var key in this) {\r\n      if (typeof this[key] !== 'function') {\r\n        this[key] = null;\r\n      }\r\n    }\r\n  }\r\n};\n},{\"./callbacks\":1}],24:[function(require,module,exports){\nmodule.exports = {\r\n};\r\n\n},{}],25:[function(require,module,exports){\nvar utils = require('./utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  PINGPP_MOCK_URL: 'http://sissi.pingxx.com/mock.php',\r\n\r\n  runTestMode: function (charge) {\r\n    var params = {\r\n      'ch_id': charge.id,\r\n      'scheme': 'http',\r\n      'channel': charge.channel\r\n    };\r\n\r\n    if (hasOwn.call(charge, 'or_id') && charge.or_id !== null) {\r\n      params.or_id = charge.or_id;\r\n    }\r\n\r\n    if (hasOwn.call(charge, 'order_no')) {\r\n      params.order_no = charge.order_no;\r\n    } else if (hasOwn.call(charge, 'orderNo')) {\r\n      params.order_no = charge.orderNo;\r\n    }\r\n    if (hasOwn.call(charge, 'time_expire')) {\r\n      params.time_expire = charge.time_expire;\r\n    } else if (hasOwn.call(charge, 'timeExpire')) {\r\n      params.time_expire = charge.timeExpire;\r\n    }\r\n    if (hasOwn.call(charge, 'extra')) {\r\n      params.extra = encodeURIComponent(JSON.stringify(charge.extra));\r\n    }\r\n    utils.redirectTo(this.PINGPP_MOCK_URL + '?' + utils.stringifyData(params));\r\n  }\r\n};\r\n\n},{\"./utils\":26}],26:[function(require,module,exports){\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nvar utils = module.exports = {\r\n\r\n  /**\r\n   * 对象转换成 query string\r\n   * @param object data  待转对象\r\n   * @param string channel  渠道\r\n   * @param boolean urlencode  是否需要 urlencode\r\n   *\r\n   * @return string query string\r\n   */\r\n  stringifyData: function (data, channel, urlencode) {\r\n    if (typeof urlencode == 'undefined') {\r\n      urlencode = false;\r\n    }\r\n    var output = [];\r\n    for (var i in data) {\r\n      if (!hasOwn.call(data, i) || typeof data[i] === 'function') {\r\n        continue;\r\n      }\r\n      if (channel == 'bfb_wap' && i == 'url') {\r\n        continue;\r\n      }\r\n      if (channel == 'yeepay_wap' && i == 'mode') {\r\n        continue;\r\n      }\r\n      if (i == 'channel_url') {\r\n        continue;\r\n      }\r\n      output.push(i + '=' +\r\n        (urlencode ? encodeURIComponent(data[i]) : data[i]));\r\n    }\r\n    return output.join('&');\r\n  },\r\n\r\n  /**\r\n   * 网络请求\r\n   * @param string url\r\n   * @param string method  请求方式, POST, GET ...\r\n   * @param object requestData  请求数据\r\n   * @param function successCallback  成功回调 (data, statusCode, xhr)\r\n   * @param function errorCallback  错误回调 (xhr, statusCode, error)\r\n   */\r\n  request: function (url, method, requestData,\r\n    successCallback, errorCallback, headers) {\r\n    if (typeof XMLHttpRequest === 'undefined') {\r\n      console.log('Function XMLHttpRequest is undefined.');\r\n      return;\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (typeof xhr.timeout !== 'undefined') {\r\n      xhr.timeout = 6000;\r\n    }\r\n    method = method.toUpperCase();\r\n\r\n    if (method === 'GET' && typeof requestData === 'object' && requestData) {\r\n      url += '?' + utils.stringifyData(requestData, '', true);\r\n    }\r\n    xhr.open(method, url, true);\r\n    if (typeof headers !== 'undefined') {\r\n      for (var k in headers) {\r\n        if (hasOwn.call(headers, k)) {\r\n          xhr.setRequestHeader(k, headers[k]);\r\n        }\r\n      }\r\n    }\r\n    if (method === 'POST') {\r\n      xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\r\n      xhr.send(JSON.stringify(requestData));\r\n    } else {\r\n      xhr.send();\r\n    }\r\n    if (typeof successCallback == 'undefined') {\r\n      successCallback = function () {};\r\n    }\r\n    if (typeof errorCallback == 'undefined') {\r\n      errorCallback = function () {};\r\n    }\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState == 4) {\r\n        successCallback(xhr.responseText, xhr.status, xhr);\r\n      }\r\n    };\r\n    xhr.onerror = function (e) {\r\n      errorCallback(xhr, 0, e);\r\n    };\r\n  },\r\n\r\n  /**\r\n   * 表单提交\r\n   * @param string url\r\n   * @param string method  请求方式, POST, GET ...\r\n   * @param object params  请求数据\r\n   */\r\n  formSubmit: function (url, method, params) {\r\n    if (typeof window === 'undefined') {\r\n      console.log('Not a browser, form submit url: ' + url);\r\n      return;\r\n    }\r\n    var form = document.createElement('form');\r\n    form.setAttribute('method', method);\r\n    form.setAttribute('action', url);\r\n\r\n    for (var key in params) {\r\n      if (hasOwn.call(params, key)) {\r\n        var hiddenField = document.createElement('input');\r\n        hiddenField.setAttribute('type', 'hidden');\r\n        hiddenField.setAttribute('name', key);\r\n        hiddenField.setAttribute('value', params[key]);\r\n        form.appendChild(hiddenField);\r\n      }\r\n    }\r\n\r\n    document.body.appendChild(form);\r\n    form.submit();\r\n  },\r\n\r\n  randomString: function (length) {\r\n    if (typeof length == 'undefined') {\r\n      length = 32;\r\n    }\r\n    var chars =\r\n      'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var maxPos = chars.length;\r\n    var str = '';\r\n    for (var i = 0; i < length; i++) {\r\n      str += chars.charAt(Math.floor(Math.random() * maxPos));\r\n    }\r\n\r\n    return str;\r\n  },\r\n\r\n  redirectTo: function (url) {\r\n    if (typeof window === 'undefined') {\r\n      console.log('Not a browser, redirect url: ' + url);\r\n      return;\r\n    }\r\n    window.location.href = url;\r\n  },\r\n\r\n  inWeixin: function () {\r\n    if (typeof navigator === 'undefined') {\r\n      return false;\r\n    }\r\n    var ua = navigator.userAgent.toLowerCase();\r\n    return ua.indexOf('micromessenger') !== -1;\r\n  },\r\n\r\n  inAlipay: function () {\r\n    if (typeof navigator === 'undefined') {\r\n      return false;\r\n    }\r\n    var ua = navigator.userAgent.toLowerCase();\r\n    return ua.indexOf('alipayclient') !== -1;\r\n  },\r\n\r\n  documentReady: function (fn) {\r\n    if (typeof document === 'undefined') {\r\n      fn();\r\n      return;\r\n    }\r\n    if (document.readyState != 'loading') {\r\n      fn();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', fn);\r\n    }\r\n  },\r\n\r\n  loadUrlJs: function (sid, jsurl, callback) {\r\n    var nodeHead = document.getElementsByTagName('head')[0];\r\n    var nodeScript = null;\r\n    if (document.getElementById(sid) == null) {\r\n      nodeScript = document.createElement('script');\r\n      nodeScript.setAttribute('type', 'text/javascript');\r\n      nodeScript.setAttribute('src', jsurl);\r\n      nodeScript.setAttribute('id', sid);\r\n      nodeScript.async = true;\r\n      if (callback != null) {\r\n        nodeScript.onload = nodeScript.onreadystatechange = function () {\r\n          if (nodeScript.ready) {\r\n            return false;\r\n          }\r\n\r\n          if (!nodeScript.readyState || nodeScript.readyState == 'loaded'\r\n              || nodeScript.readyState == 'complete') {\r\n            nodeScript.ready = true;\r\n            callback();\r\n          }\r\n        };\r\n      }\r\n      nodeHead.appendChild(nodeScript);\r\n    } else {\r\n      if (callback != null) {\r\n        callback();\r\n      }\r\n    }\r\n  }\r\n};\r\n\n},{}],27:[function(require,module,exports){\nmodule.exports = {\r\n  v: '2.1.9'\r\n};\r\n\n},{}]},{},[21])(21)\n});\n\n","var utils = require('../utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  ALIPAY_PC_DIRECT_URL: 'https://mapi.alipay.com/gateway.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n    var baseURL = this.ALIPAY_PC_DIRECT_URL;\r\n    if (hasOwn.call(credential, 'channel_url')) {\r\n      baseURL = credential.channel_url;\r\n    }\r\n    if (!hasOwn.call(credential, '_input_charset')) {\r\n      if(hasOwn.call(credential, 'service')\r\n        && credential.service === 'alipay.wap.create.direct.pay.by.user') {\r\n        credential._input_charset = 'utf-8';\r\n      }\r\n    }\r\n    var query = utils.stringifyData(credential, channel, true);\r\n    utils.redirectTo(baseURL + '?' + query);\r\n  }\r\n};\r\n","var utils = require('../utils');\r\nvar mods = require('../mods');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  ALIPAY_WAP_URL_OLD: 'https://wappaygw.alipay.com/service/rest.htm',\r\n  ALIPAY_WAP_URL: 'https://mapi.alipay.com/gateway.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n    var baseURL = this.ALIPAY_WAP_URL;\r\n    if (hasOwn.call(credential, 'req_data')) {\r\n      baseURL = this.ALIPAY_WAP_URL_OLD;\r\n    } else if (hasOwn.call(credential, 'channel_url')) {\r\n      baseURL = credential.channel_url;\r\n    }\r\n    if (!hasOwn.call(credential, '_input_charset')) {\r\n      if ((hasOwn.call(credential, 'service')\r\n          && credential.service === 'alipay.wap.create.direct.pay.by.user')\r\n        || hasOwn.call(credential, 'req_data')\r\n      ) {\r\n        credential._input_charset = 'utf-8';\r\n      }\r\n    }\r\n    var query = utils.stringifyData(credential, channel, true);\r\n    var targetURL = baseURL + '?' + query;\r\n    var ap = mods.getExtraModule('ap');\r\n    if (utils.inWeixin() && typeof ap !== 'undefined') {\r\n      ap.pay(targetURL);\r\n    } else {\r\n      utils.redirectTo(targetURL);\r\n    }\r\n  }\r\n};\r\n","var utils = require('../utils');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n\r\n    if (!hasOwn.call(credential, 'url')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'missing_field:url'));\r\n      return;\r\n    }\r\n    utils.redirectTo(credential.url + '?' +\r\n      utils.stringifyData(credential, channel));\r\n  }\r\n};\r\n","var utils = require('../../utils');\r\nvar callbacks = require('../../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var targetURL;\r\n    if (typeof credential === 'string') {\r\n      targetURL = credential;\r\n    } else if (hasOwn.call(credential, 'url')) {\r\n      targetURL = credential.url;\r\n    } else {\r\n      callbacks.innerCallback('fail', callbacks.error('invalid_credential',\r\n        'credential format is incorrect'));\r\n      return;\r\n    }\r\n    utils.redirectTo(targetURL);\r\n  }\r\n};\r\n","var utils = require('../utils');\r\n\r\nmodule.exports = {\r\n\r\n  CP_B2B_URL: 'https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    utils.formSubmit(this.CP_B2B_URL, 'post', credential);\r\n  }\r\n};\r\n","var redirectBase = require('./commons/redirect_base');\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    redirectBase.handleCharge(charge);\r\n  }\r\n};\r\n","var redirectBase = require('./commons/redirect_base');\r\nvar callbacks = require('../callbacks');\r\nvar utils = require('../utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n  handleCharge: function (charge) {\r\n    var extra = charge.extra;\r\n    if (hasOwn.call(extra, 'pay_channel')) {\r\n      var pay_channel = extra.pay_channel;\r\n      if (pay_channel === 'wx' && !utils.inWeixin()) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('Not in the WeChat browser'));\r\n        return;\r\n      } else if (pay_channel === 'alipay' && !utils.inAlipay()) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('Not in the Alipay browser'));\r\n        return;\r\n      }\r\n    } else {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'charge 格式不正确'));\r\n      return;\r\n    }\r\n    redirectBase.handleCharge(charge);\r\n  }\r\n};\r\n","var utils = require('../utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  JDPAY_WAP_URL_OLD: 'https://m.jdpay.com/wepay/web/pay',\r\n  JDPAY_H5_URL: 'https://h5pay.jd.com/jdpay/saveOrder',\r\n  JDPAY_PC_URL: 'https://wepay.jd.com/jdpay/saveOrder',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var request_url = this.JDPAY_H5_URL;\r\n    if (hasOwn.call(credential, 'channelUrl')) {\r\n      request_url = credential.channelUrl;\r\n      delete credential.channelUrl;\r\n    } else if (hasOwn.call(credential, 'merchantRemark')) {\r\n      request_url = this.JDPAY_WAP_URL_OLD;\r\n    }\r\n    utils.formSubmit(request_url, 'post', credential);\r\n  }\r\n};\r\n","var callbacks = require('../callbacks');\r\nvar utils = require('../utils');\r\nvar stash = require('../stash');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\n/*global mqq*/\r\nmodule.exports = {\r\n  SRC_URL: 'https://open.mobile.qq.com/sdk/qqapi.js?_bid=152',\r\n  ID: 'mqq_api',\r\n\r\n  handleCharge: function (charge) {\r\n    var credential = charge.credential[charge.channel];\r\n\r\n    if (!hasOwn.call(credential, 'token_id')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'missing_token_id'));\r\n      return;\r\n    }\r\n\r\n    stash.tokenId = credential.token_id;\r\n    utils.loadUrlJs(this.ID, this.SRC_URL, this.callpay);\r\n  },\r\n\r\n  callpay: function () {\r\n    if (typeof mqq != 'undefined') {\r\n      if (mqq.QQVersion == 0) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('Not in the QQ client'));\r\n        delete stash.tokenId;\r\n        return;\r\n      }\r\n      mqq.tenpay.pay({\r\n        tokenId: stash.tokenId\r\n      }, function (result) {\r\n        if (result.resultCode == 0) {\r\n          callbacks.innerCallback('success');\r\n        } else {\r\n          callbacks.innerCallback('fail',\r\n            callbacks.error(result.retmsg));\r\n        }\r\n      });\r\n    } else {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('network_err'));\r\n    }\r\n    delete stash.tokenId;\r\n  }\r\n};","var utils = require('../utils');\r\n\r\nmodule.exports = {\r\n\r\n  UPACP_PC_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    utils.formSubmit(this.UPACP_PC_URL, 'post', credential);\r\n  }\r\n};\r\n","var utils = require('../utils');\r\n\r\nmodule.exports = {\r\n\r\n  UPACP_WAP_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    utils.formSubmit(this.UPACP_WAP_URL, 'post', credential);\r\n  }\r\n};\r\n","/**\r\n * Created by yulitao on 2016/12/29.\r\n */\r\nvar stash = require('../stash');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n/*global wx*/\r\nmodule.exports = {\r\n\r\n  handleCharge: function (charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var fields = [\r\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\r\n    ];\r\n    for (var k = 0; k < fields.length; k++) {\r\n      if (!hasOwn.call(credential, fields[k])) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\r\n        return;\r\n      }\r\n    }\r\n    stash.jsApiParameters = credential;\r\n    this.callpay();\r\n  },\r\n\r\n  wxLiteEnabled: function () {\r\n    return typeof wx !== 'undefined' && wx.requestPayment;\r\n  },\r\n\r\n  //微信小程序支付\r\n  callpay: function () {\r\n    if (!this.wxLiteEnabled()) {\r\n      console.log('请在微信小程序中打开');\r\n      return;\r\n    }\r\n    var wx_lite = stash.jsApiParameters;\r\n    delete wx_lite.appId;\r\n    wx_lite.complete = function (res) {\r\n      //支付成功\r\n      if (res.errMsg === 'requestPayment:ok') {\r\n        callbacks.innerCallback('success');\r\n      }\r\n      //取消支付\r\n      if (res.errMsg === 'requestPayment:cancel') {\r\n        callbacks.innerCallback('cancel', callbacks.error('用户取消支付'));\r\n      }\r\n      //支付验证签名失败\r\n      if (res.err_code !== 'undefined' && res.err_desc !== 'undefined') {\r\n        callbacks.innerCallback('fail', callbacks.error(res.err_desc, res));\r\n      }\r\n    };\r\n    wx.requestPayment(wx_lite);\r\n  },\r\n\r\n  /* eslint-disable no-unused-vars */\r\n  runTestMode: function (url) {\r\n    wx.showModal({\r\n      title: '提示',\r\n      content: '因 \"微信小程序\" 限制 域名的原因 暂不支持 模拟付款 请使用 livekey 获取 charge 进行支付'\r\n    });\r\n  }\r\n  /* eslint-enable no-unused-vars */\r\n};\r\n","var callbacks = require('../callbacks');\r\nvar utils = require('../utils');\r\nvar stash = require('../stash');\r\nvar mods = require('../mods');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\n/*global WeixinJSBridge*/\r\nmodule.exports = {\r\n\r\n  PINGPP_NOTIFY_URL_BASE: 'https://api.pingxx.com/notify',\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    var fields = [\r\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\r\n    ];\r\n    for (var k = 0; k < fields.length; k++) {\r\n      if (!hasOwn.call(credential, fields[k])) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\r\n        return;\r\n      }\r\n    }\r\n    stash.jsApiParameters = credential;\r\n    this.callpay();\r\n  },\r\n\r\n  callpay: function() {\r\n    var self = this;\r\n    var wx_jssdk = mods.getExtraModule('wx_jssdk');\r\n    if (typeof wx_jssdk !== 'undefined' && wx_jssdk.jssdkEnabled()) {\r\n      wx_jssdk.callpay();\r\n    } else if (typeof WeixinJSBridge == 'undefined') {\r\n      var eventCallback = function() {\r\n        self.jsApiCall();\r\n      };\r\n      if (document.addEventListener) {\r\n        document.addEventListener('WeixinJSBridgeReady',\r\n          eventCallback, false);\r\n      } else if (document.attachEvent) {\r\n        document.attachEvent('WeixinJSBridgeReady', eventCallback);\r\n        document.attachEvent('onWeixinJSBridgeReady', eventCallback);\r\n      }\r\n    } else {\r\n      this.jsApiCall();\r\n    }\r\n  },\r\n\r\n  jsApiCall: function() {\r\n    if (hasOwn.call(stash, 'jsApiParameters')) {\r\n      WeixinJSBridge.invoke(\r\n        'getBrandWCPayRequest',\r\n        stash.jsApiParameters,\r\n        function(res) {\r\n          delete stash.jsApiParameters;\r\n          if (res.err_msg == 'get_brand_wcpay_request:ok') {\r\n            callbacks.innerCallback('success');\r\n          } else if (res.err_msg == 'get_brand_wcpay_request:cancel') {\r\n            callbacks.innerCallback('cancel');\r\n          } else {\r\n            callbacks.innerCallback('fail',\r\n              callbacks.error('wx_result_fail', res.err_msg));\r\n          }\r\n        }\r\n      );\r\n    }\r\n  },\r\n\r\n  runTestMode: function(charge) {\r\n    var dopay = confirm('模拟付款？');\r\n    if (dopay) {\r\n      var path = (charge.or_id === null ? '' : '/orders/' + charge.or_id)\r\n          + '/charges/' + charge.id;\r\n      utils.request(this.PINGPP_NOTIFY_URL_BASE + path + '?livemode=false',\r\n        'GET', null,\r\n        function(data, status) {\r\n          if (status >= 200 && status < 400 && data == 'success') {\r\n            callbacks.innerCallback('success');\r\n          } else {\r\n            var extra = 'http_code:' + status + ';response:' + data;\r\n            callbacks.innerCallback('fail',\r\n              callbacks.error('testmode_notify_fail', extra));\r\n          }\r\n        },\r\n        function() {\r\n          callbacks.innerCallback('fail', callbacks.error('network_err'));\r\n        });\r\n    }\r\n  }\r\n};\r\n","var utils = require('../utils');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  handleCharge: function(charge) {\r\n    var credential = charge.credential[charge.channel];\r\n    if (typeof credential === 'string') {\r\n      utils.redirectTo(credential);\r\n    } else if (typeof credential === 'object'\r\n      && hasOwn.call(credential, 'url')\r\n    ) {\r\n      utils.redirectTo(credential.url);\r\n    } else {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'credential 格式不正确'));\r\n    }\r\n  }\r\n};\r\n","var utils = require('../utils');\r\nvar callbacks = require('../callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  YEEPAY_WAP_URL: 'https://ok.yeepay.com/paymobile/api/pay/request',\r\n  YEEPAY_WAP_TEST_URL: 'http://mobiletest.yeepay.com/paymobile/api/pay/request',\r\n\r\n  handleCharge: function(charge) {\r\n    var channel = charge.channel;\r\n    var credential = charge.credential[channel];\r\n    var fields = ['merchantaccount', 'encryptkey', 'data'];\r\n    for (var k = 0; k < fields.length; k++) {\r\n      if (!hasOwn.call(credential, fields[k])) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\r\n        return;\r\n      }\r\n    }\r\n    var baseURL;\r\n    if (hasOwn.call(credential, 'mode') && credential.mode == 'test') {\r\n      baseURL = this.YEEPAY_WAP_TEST_URL;\r\n    } else {\r\n      baseURL = this.YEEPAY_WAP_URL;\r\n    }\r\n    utils.redirectTo(baseURL + '?' +\r\n      utils.stringifyData(credential, channel, true));\r\n  }\r\n};\r\n","var utils = require('./utils');\r\nvar stash = require('./stash');\r\nvar md5 = require('./libs/md5');\r\n\r\nvar collection = {\r\n  seperator: '###',\r\n  limit: 1,\r\n  report_url: 'https://statistics.pingxx.com/one_stats',\r\n  timeout: 100\r\n};\r\nvar getParam = function(str, param) {\r\n  var reg = new RegExp('(^|&)' + param + '=([^&]*)(&|$)', 'i');\r\n  var r = str.substr(0).match(reg);\r\n  if (r !== null) return unescape(r[2]);\r\n  return null;\r\n};\r\nvar getUserAgent = function() {\r\n  return navigator.userAgent;\r\n};\r\nvar getHost = function() {\r\n  return window.location.host;\r\n};\r\n\r\ncollection.store = function(obj) {\r\n  if (typeof localStorage === 'undefined' || localStorage === null) return;\r\n  var _this = this;\r\n  var reportData = {};\r\n  reportData.app_id = obj.app_id || stash.app_id || 'app_not_defined';\r\n  reportData.ch_id = obj.ch_id || '';\r\n  reportData.channel = obj.channel || '';\r\n  reportData.type = obj.type || '';\r\n  reportData.user_agent = getUserAgent();\r\n  reportData.host = getHost();\r\n  reportData.time = new Date().getTime();\r\n  reportData.puid = stash.puid;\r\n\r\n  var reportStr = 'app_id=' + reportData.app_id +\r\n    '&channel=' + reportData.channel + '&ch_id=' + reportData.ch_id +\r\n    '&host=' + reportData.host + '&time=' + reportData.time +\r\n    '&type=' + reportData.type + '&user_agent=' + reportData.user_agent +\r\n    '&puid=' + reportData.puid;\r\n\r\n  var statsToSave = reportStr;\r\n  if (localStorage.getItem('PPP_ONE_STATS') !== null &&\r\n    localStorage.getItem('PPP_ONE_STATS').length !== 0\r\n  ) {\r\n    statsToSave = localStorage.getItem('PPP_ONE_STATS') +\r\n      _this.seperator + reportStr;\r\n  }\r\n  try {\r\n    localStorage.setItem('PPP_ONE_STATS', statsToSave);\r\n  } catch (e) {\r\n    /* empty */\r\n  }\r\n};\r\n\r\ncollection.send = function() {\r\n  if (typeof localStorage === 'undefined' || localStorage === null) return;\r\n  var _this = this;\r\n  var pppOneStats = localStorage.getItem('PPP_ONE_STATS');\r\n  if (pppOneStats === null ||\r\n    pppOneStats.split(_this.seperator).length < _this.limit) {\r\n    return;\r\n  }\r\n  try {\r\n    var data = [];\r\n    var origin = pppOneStats.split(_this.seperator);\r\n    var token = md5(origin.join('&'));\r\n\r\n    for (var i = 0; i < origin.length; i++) {\r\n      data.push({\r\n        app_id: getParam(origin[i], 'app_id'),\r\n        channel: getParam(origin[i], 'channel'),\r\n        ch_id: getParam(origin[i], 'ch_id'),\r\n        host: getParam(origin[i], 'host'),\r\n        time: getParam(origin[i], 'time'),\r\n        type: getParam(origin[i], 'type'),\r\n        user_agent: getParam(origin[i], 'user_agent'),\r\n        puid: getParam(origin[i], 'puid')\r\n      });\r\n    }\r\n\r\n    utils.request(_this.report_url, 'POST', data, function(data, status) {\r\n      if (status == 200) {\r\n        localStorage.removeItem('PPP_ONE_STATS');\r\n      }\r\n    }, undefined, {\r\n      'X-Pingpp-Report-Token': token\r\n    });\r\n  } catch (e) {\r\n    /* empty */\r\n  }\r\n};\r\n\r\ncollection.report = function(obj) {\r\n  var _this = this;\r\n  _this.store(obj);\r\n  setTimeout(function(){\r\n    _this.send();\r\n  }, _this.timeout);\r\n};\r\n\r\nmodule.exports = collection;\r\n","var stash = require('./stash');\r\nvar utils = require('./utils');\r\nvar dc = require('./collection');\r\n\r\nmodule.exports = {\r\n  SRC_URL: 'https://cookie.pingxx.com',\r\n\r\n  init: function() {\r\n    var self = this;\r\n    utils.documentReady(function(){\r\n      self.initPuid();\r\n    });\r\n  },\r\n\r\n  initPuid: function() {\r\n    if (typeof window === 'undefined' || typeof localStorage === 'undefined'\r\n        || localStorage === null) {\r\n      return;\r\n    }\r\n    var puid = localStorage.getItem('pingpp_uid');\r\n    if (puid === null) {\r\n      puid = utils.randomString();\r\n      try {\r\n        localStorage.setItem('pingpp_uid', puid);\r\n      } catch (e) {\r\n        /* empty */\r\n      }\r\n    }\r\n    stash.puid = puid;\r\n    if (!document.getElementById('p_analyse_iframe')) {\r\n      var iframe;\r\n      try {\r\n        iframe = document.createElement('iframe');\r\n      }catch(e){\r\n        iframe = document.createElement('<iframe name=\"ifr\"></iframe>');\r\n      }\r\n      iframe.id = 'p_analyse_iframe';\r\n      iframe.src = this.SRC_URL + '/?puid=' + puid;\r\n      iframe.style.display = 'none';\r\n      document.body.appendChild(iframe);\r\n    }\r\n    setTimeout(function() {\r\n      dc.send();\r\n    }, 0);\r\n  }\r\n};\r\n","/*\r\n * JavaScript MD5\r\n * https://github.com/blueimp/JavaScript-MD5\r\n *\r\n * Copyright 2011, Sebastian Tschan\r\n * https://blueimp.net\r\n *\r\n * Licensed under the MIT license:\r\n * http://www.opensource.org/licenses/MIT\r\n *\r\n * Based on\r\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\r\n * Digest Algorithm, as defined in RFC 1321.\r\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\r\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\r\n * Distributed under the BSD License\r\n * See http://pajhome.org.uk/crypt/md5 for more info.\r\n */\r\n\r\n/* global unescape, module */\r\n\r\n(function () {\r\n  /*\r\n  * Add integers, wrapping at 2^32. This uses 16-bit operations internally\r\n  * to work around bugs in some JS interpreters.\r\n  */\r\n  function safe_add (x, y) {\r\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\r\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\r\n    return (msw << 16) | (lsw & 0xFFFF);\r\n  }\r\n\r\n  /*\r\n  * Bitwise rotate a 32-bit number to the left.\r\n  */\r\n  function bit_rol (num, cnt) {\r\n    return (num << cnt) | (num >>> (32 - cnt));\r\n  }\r\n\r\n  /*\r\n  * These functions implement the four basic operations the algorithm uses.\r\n  */\r\n  function md5_cmn (q, a, b, x, s, t) {\r\n    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\r\n  }\r\n  function md5_ff (a, b, c, d, x, s, t) {\r\n    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\r\n  }\r\n  function md5_gg (a, b, c, d, x, s, t) {\r\n    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\r\n  }\r\n  function md5_hh (a, b, c, d, x, s, t) {\r\n    return md5_cmn(b ^ c ^ d, a, b, x, s, t);\r\n  }\r\n  function md5_ii (a, b, c, d, x, s, t) {\r\n    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\r\n  }\r\n\r\n  /*\r\n  * Calculate the MD5 of an array of little-endian words, and a bit length.\r\n  */\r\n  function binl_md5 (x, len) {\r\n    /* append padding */\r\n    x[len >> 5] |= 0x80 << (len % 32);\r\n    x[(((len + 64) >>> 9) << 4) + 14] = len;\r\n\r\n    var i;\r\n    var olda;\r\n    var oldb;\r\n    var oldc;\r\n    var oldd;\r\n    var a = 1732584193;\r\n    var b = -271733879;\r\n    var c = -1732584194;\r\n    var d = 271733878;\r\n\r\n    for (i = 0; i < x.length; i += 16) {\r\n      olda = a;\r\n      oldb = b;\r\n      oldc = c;\r\n      oldd = d;\r\n\r\n      a = md5_ff(a, b, c, d, x[i], 7, -680876936);\r\n      d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\r\n      c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\r\n      b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\r\n      a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\r\n      d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\r\n      c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\r\n      b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\r\n      a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\r\n      d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\r\n      c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\r\n      b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\r\n      a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\r\n      d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\r\n      c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\r\n      b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\r\n\r\n      a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\r\n      d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\r\n      c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\r\n      b = md5_gg(b, c, d, a, x[i], 20, -373897302);\r\n      a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\r\n      d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\r\n      c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\r\n      b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\r\n      a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\r\n      d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\r\n      c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\r\n      b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\r\n      a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\r\n      d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\r\n      c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\r\n      b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\r\n\r\n      a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\r\n      d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\r\n      c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\r\n      b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\r\n      a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\r\n      d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\r\n      c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\r\n      b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\r\n      a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\r\n      d = md5_hh(d, a, b, c, x[i], 11, -358537222);\r\n      c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\r\n      b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\r\n      a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\r\n      d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\r\n      c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\r\n      b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\r\n\r\n      a = md5_ii(a, b, c, d, x[i], 6, -198630844);\r\n      d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\r\n      c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\r\n      b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\r\n      a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\r\n      d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\r\n      c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\r\n      b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\r\n      a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\r\n      d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\r\n      c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\r\n      b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\r\n      a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\r\n      d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\r\n      c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\r\n      b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\r\n\r\n      a = safe_add(a, olda);\r\n      b = safe_add(b, oldb);\r\n      c = safe_add(c, oldc);\r\n      d = safe_add(d, oldd);\r\n    }\r\n    return [a, b, c, d];\r\n  }\r\n\r\n  /*\r\n  * Convert an array of little-endian words to a string\r\n  */\r\n  function binl2rstr (input) {\r\n    var i;\r\n    var output = '';\r\n    for (i = 0; i < input.length * 32; i += 8) {\r\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /*\r\n  * Convert a raw string to an array of little-endian words\r\n  * Characters >255 have their high-byte silently ignored.\r\n  */\r\n  function rstr2binl (input) {\r\n    var i;\r\n    var output = [];\r\n    output[(input.length >> 2) - 1] = undefined;\r\n    for (i = 0; i < output.length; i += 1) {\r\n      output[i] = 0;\r\n    }\r\n    for (i = 0; i < input.length * 8; i += 8) {\r\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /*\r\n  * Calculate the MD5 of a raw string\r\n  */\r\n  function rstr_md5 (s) {\r\n    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\r\n  }\r\n\r\n  /*\r\n  * Calculate the HMAC-MD5, of a key and some data (raw strings)\r\n  */\r\n  function rstr_hmac_md5 (key, data) {\r\n    var i;\r\n    var bkey = rstr2binl(key);\r\n    var ipad = [];\r\n    var opad = [];\r\n    var hash;\r\n    ipad[15] = opad[15] = undefined;\r\n    if (bkey.length > 16) {\r\n      bkey = binl_md5(bkey, key.length * 8);\r\n    }\r\n    for (i = 0; i < 16; i += 1) {\r\n      ipad[i] = bkey[i] ^ 0x36363636;\r\n      opad[i] = bkey[i] ^ 0x5C5C5C5C;\r\n    }\r\n    hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\r\n    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\r\n  }\r\n\r\n  /*\r\n  * Convert a raw string to a hex string\r\n  */\r\n  function rstr2hex (input) {\r\n    var hex_tab = '0123456789abcdef';\r\n    var output = '';\r\n    var x;\r\n    var i;\r\n    for (i = 0; i < input.length; i += 1) {\r\n      x = input.charCodeAt(i);\r\n      output += hex_tab.charAt((x >>> 4) & 0x0F) +\r\n      hex_tab.charAt(x & 0x0F);\r\n    }\r\n    return output;\r\n  }\r\n\r\n  /*\r\n  * Encode a string as utf-8\r\n  */\r\n  function str2rstr_utf8 (input) {\r\n    return unescape(encodeURIComponent(input));\r\n  }\r\n\r\n  /*\r\n  * Take string arguments and return either raw or hex encoded strings\r\n  */\r\n  function raw_md5 (s) {\r\n    return rstr_md5(str2rstr_utf8(s));\r\n  }\r\n  function hex_md5 (s) {\r\n    return rstr2hex(raw_md5(s));\r\n  }\r\n  function raw_hmac_md5 (k, d) {\r\n    return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));\r\n  }\r\n  function hex_hmac_md5 (k, d) {\r\n    return rstr2hex(raw_hmac_md5(k, d));\r\n  }\r\n\r\n  function md5 (string, key, raw) {\r\n    if (!key) {\r\n      if (!raw) {\r\n        return hex_md5(string);\r\n      }\r\n      return raw_md5(string);\r\n    }\r\n    if (!raw) {\r\n      return hex_hmac_md5(key, string);\r\n    }\r\n    return raw_hmac_md5(key, string);\r\n  }\r\n\r\n  module.exports = md5;\r\n}());\r\n","var version = require('./version').v;\r\nvar testmode = require('./testmode');\r\nvar callbacks = require('./callbacks');\r\nvar mods = require('./mods');\r\nvar stash = require('./stash');\r\nvar dc = require('./collection');\r\nvar payment_elements = require('./payment_elements');\r\n\r\nvar hasOwn = {}.hasOwnProperty;\r\nvar PingppSDK = function () {\r\n  require('./init').init();\r\n};\r\n\r\nPingppSDK.prototype = {\r\n\r\n  version: version,\r\n\r\n  createPayment: function (chargeJSON, callback, signature, debug) {\r\n    if (typeof callback === 'function') {\r\n      callbacks.userCallback = callback;\r\n    }\r\n\r\n    payment_elements.init(chargeJSON);\r\n\r\n    if (!hasOwn.call(payment_elements, 'id')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_charge_id'));\r\n      return;\r\n    }\r\n    if (!hasOwn.call(payment_elements, 'channel')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_channel'));\r\n      return;\r\n    }\r\n    if (hasOwn.call(payment_elements, 'app')) {\r\n      if (typeof payment_elements.app === 'string') {\r\n        stash.app_id = payment_elements.app;\r\n      } else if (typeof payment_elements.app === 'object' &&\r\n        typeof payment_elements.app.id === 'string') {\r\n        stash.app_id = payment_elements.app.id;\r\n      }\r\n    }\r\n    dc.report({\r\n      type: 'pure_sdk_click',\r\n      channel: payment_elements.channel,\r\n      ch_id: payment_elements.id\r\n    });\r\n    var channel = payment_elements.channel;\r\n    if (!hasOwn.call(payment_elements, 'credential')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_credential'));\r\n      return;\r\n    }\r\n    if (!payment_elements.credential) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'credential_is_undefined'));\r\n      return;\r\n    }\r\n    if (!hasOwn.call(payment_elements.credential, channel)) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_credential', 'credential_is_incorrect'));\r\n      return;\r\n    }\r\n    if (!hasOwn.call(payment_elements, 'livemode')) {\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_charge', 'no_livemode_field'));\r\n      return;\r\n    }\r\n    var channelModule = mods.getChannelModule(channel);\r\n    if (typeof channelModule === 'undefined') {\r\n      console.error('channel module \"' + channel + '\" is undefined');\r\n      callbacks.innerCallback('fail',\r\n        callbacks.error('invalid_channel',\r\n          'channel module \"' + channel + '\" is undefined')\r\n      );\r\n      return;\r\n    }\r\n    if (payment_elements.livemode === false) {\r\n      if (hasOwn.call(channelModule, 'runTestMode')) {\r\n        channelModule.runTestMode(payment_elements);\r\n      } else {\r\n        testmode.runTestMode(payment_elements);\r\n      }\r\n      return;\r\n    }\r\n\r\n    if (typeof signature != 'undefined') {\r\n      stash.signature = signature;\r\n    }\r\n    if (typeof debug == 'boolean') {\r\n      stash.debug = debug;\r\n    }\r\n    channelModule.handleCharge(payment_elements);\r\n  },\r\n\r\n  setAPURL: function (url) {\r\n    stash.APURL = url;\r\n  }\r\n};\r\n\r\nmodule.exports = new PingppSDK();\r\n","var hasOwn = {}.hasOwnProperty;\r\nvar mods = {};\r\nmodule.exports = mods;\r\n\r\nmods.channels = {\r\n  alipay_pc_direct: require('./channels/alipay_pc_direct'),\n  alipay_wap: require('./channels/alipay_wap'),\n  bfb_wap: require('./channels/bfb_wap'),\n  cp_b2b: require('./channels/cp_b2b'),\n  fqlpay_qr: require('./channels/fqlpay_qr'),\n  fqlpay_wap: require('./channels/fqlpay_wap'),\n  isv_wap: require('./channels/isv_wap'),\n  jdpay_wap: require('./channels/jdpay_wap'),\n  qpay_pub: require('./channels/qpay_pub'),\n  upacp_pc: require('./channels/upacp_pc'),\n  upacp_wap: require('./channels/upacp_wap'),\n  wx_lite: require('./channels/wx_lite'),\n  wx_pub: require('./channels/wx_pub'),\n  wx_wap: require('./channels/wx_wap'),\n  yeepay_wap: require('./channels/yeepay_wap')\r\n};\r\n\r\nmods.extras = {\r\n\r\n};\r\n\r\nmods.getChannelModule = function(channel) {\r\n  if (hasOwn.call(mods.channels, channel)) {\r\n    return mods.channels[channel];\r\n  }\r\n  return undefined;\r\n};\r\n\r\nmods.getExtraModule = function(name) {\r\n  if (hasOwn.call(mods.extras, name)) {\r\n    return mods.extras[name];\r\n  }\r\n  return undefined;\r\n};\r\n","/**\r\n * Created by dong on 2016/12/30.\r\n */\r\n\r\nvar callbacks = require('./callbacks');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n  id: null,\r\n  or_id: null,\r\n  channel: null,\r\n  app: null,\r\n  credential: {},\r\n  extra: null,\r\n  livemode: null,\r\n  order_no: null,\r\n  time_expire: null,\r\n\r\n  init: function (charge_or_order) {\r\n    var charge;\r\n    if (typeof charge_or_order === 'string') {\r\n      try {\r\n        charge = JSON.parse(charge_or_order);\r\n      } catch (err) {\r\n        callbacks.innerCallback('fail',\r\n          callbacks.error('json_decode_fail', err));\r\n        return;\r\n      }\r\n    } else {\r\n      charge = charge_or_order;\r\n    }\r\n\r\n    if (typeof charge === 'undefined') {\r\n      callbacks.innerCallback('fail', callbacks.error('json_decode_fail'));\r\n      return;\r\n    }\r\n\r\n    if (hasOwn.call(charge, 'object') && charge.object == 'order') {\r\n      charge.or_id = charge.id;\r\n      charge.id = charge.charge;\r\n      charge.order_no = charge.merchant_order_no;\r\n      var charge_essentials = charge.charge_essentials;\r\n      charge.channel = charge_essentials.channel;\r\n      charge.credential = charge_essentials.credential;\r\n      charge.extra = charge_essentials.extra;\r\n    }\r\n\r\n    for (var key in this) {\r\n      if (hasOwn.call(charge, key)) {\r\n        this[key] = charge[key];\r\n      }\r\n    }\r\n    return this;\r\n  },\r\n\r\n  clear: function () {\r\n    for (var key in this) {\r\n      if (typeof this[key] !== 'function') {\r\n        this[key] = null;\r\n      }\r\n    }\r\n  }\r\n};","module.exports = {\r\n};\r\n","var utils = require('./utils');\r\nvar hasOwn = {}.hasOwnProperty;\r\n\r\nmodule.exports = {\r\n\r\n  PINGPP_MOCK_URL: 'http://sissi.pingxx.com/mock.php',\r\n\r\n  runTestMode: function (charge) {\r\n    var params = {\r\n      'ch_id': charge.id,\r\n      'scheme': 'http',\r\n      'channel': charge.channel\r\n    };\r\n\r\n    if (hasOwn.call(charge, 'or_id') && charge.or_id !== null) {\r\n      params.or_id = charge.or_id;\r\n    }\r\n\r\n    if (hasOwn.call(charge, 'order_no')) {\r\n      params.order_no = charge.order_no;\r\n    } else if (hasOwn.call(charge, 'orderNo')) {\r\n      params.order_no = charge.orderNo;\r\n    }\r\n    if (hasOwn.call(charge, 'time_expire')) {\r\n      params.time_expire = charge.time_expire;\r\n    } else if (hasOwn.call(charge, 'timeExpire')) {\r\n      params.time_expire = charge.timeExpire;\r\n    }\r\n    if (hasOwn.call(charge, 'extra')) {\r\n      params.extra = encodeURIComponent(JSON.stringify(charge.extra));\r\n    }\r\n    utils.redirectTo(this.PINGPP_MOCK_URL + '?' + utils.stringifyData(params));\r\n  }\r\n};\r\n","var hasOwn = {}.hasOwnProperty;\r\n\r\nvar utils = module.exports = {\r\n\r\n  /**\r\n   * 对象转换成 query string\r\n   * @param object data  待转对象\r\n   * @param string channel  渠道\r\n   * @param boolean urlencode  是否需要 urlencode\r\n   *\r\n   * @return string query string\r\n   */\r\n  stringifyData: function (data, channel, urlencode) {\r\n    if (typeof urlencode == 'undefined') {\r\n      urlencode = false;\r\n    }\r\n    var output = [];\r\n    for (var i in data) {\r\n      if (!hasOwn.call(data, i) || typeof data[i] === 'function') {\r\n        continue;\r\n      }\r\n      if (channel == 'bfb_wap' && i == 'url') {\r\n        continue;\r\n      }\r\n      if (channel == 'yeepay_wap' && i == 'mode') {\r\n        continue;\r\n      }\r\n      if (i == 'channel_url') {\r\n        continue;\r\n      }\r\n      output.push(i + '=' +\r\n        (urlencode ? encodeURIComponent(data[i]) : data[i]));\r\n    }\r\n    return output.join('&');\r\n  },\r\n\r\n  /**\r\n   * 网络请求\r\n   * @param string url\r\n   * @param string method  请求方式, POST, GET ...\r\n   * @param object requestData  请求数据\r\n   * @param function successCallback  成功回调 (data, statusCode, xhr)\r\n   * @param function errorCallback  错误回调 (xhr, statusCode, error)\r\n   */\r\n  request: function (url, method, requestData,\r\n    successCallback, errorCallback, headers) {\r\n    if (typeof XMLHttpRequest === 'undefined') {\r\n      console.log('Function XMLHttpRequest is undefined.');\r\n      return;\r\n    }\r\n    var xhr = new XMLHttpRequest();\r\n    if (typeof xhr.timeout !== 'undefined') {\r\n      xhr.timeout = 6000;\r\n    }\r\n    method = method.toUpperCase();\r\n\r\n    if (method === 'GET' && typeof requestData === 'object' && requestData) {\r\n      url += '?' + utils.stringifyData(requestData, '', true);\r\n    }\r\n    xhr.open(method, url, true);\r\n    if (typeof headers !== 'undefined') {\r\n      for (var k in headers) {\r\n        if (hasOwn.call(headers, k)) {\r\n          xhr.setRequestHeader(k, headers[k]);\r\n        }\r\n      }\r\n    }\r\n    if (method === 'POST') {\r\n      xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\r\n      xhr.send(JSON.stringify(requestData));\r\n    } else {\r\n      xhr.send();\r\n    }\r\n    if (typeof successCallback == 'undefined') {\r\n      successCallback = function () {};\r\n    }\r\n    if (typeof errorCallback == 'undefined') {\r\n      errorCallback = function () {};\r\n    }\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState == 4) {\r\n        successCallback(xhr.responseText, xhr.status, xhr);\r\n      }\r\n    };\r\n    xhr.onerror = function (e) {\r\n      errorCallback(xhr, 0, e);\r\n    };\r\n  },\r\n\r\n  /**\r\n   * 表单提交\r\n   * @param string url\r\n   * @param string method  请求方式, POST, GET ...\r\n   * @param object params  请求数据\r\n   */\r\n  formSubmit: function (url, method, params) {\r\n    if (typeof window === 'undefined') {\r\n      console.log('Not a browser, form submit url: ' + url);\r\n      return;\r\n    }\r\n    var form = document.createElement('form');\r\n    form.setAttribute('method', method);\r\n    form.setAttribute('action', url);\r\n\r\n    for (var key in params) {\r\n      if (hasOwn.call(params, key)) {\r\n        var hiddenField = document.createElement('input');\r\n        hiddenField.setAttribute('type', 'hidden');\r\n        hiddenField.setAttribute('name', key);\r\n        hiddenField.setAttribute('value', params[key]);\r\n        form.appendChild(hiddenField);\r\n      }\r\n    }\r\n\r\n    document.body.appendChild(form);\r\n    form.submit();\r\n  },\r\n\r\n  randomString: function (length) {\r\n    if (typeof length == 'undefined') {\r\n      length = 32;\r\n    }\r\n    var chars =\r\n      'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    var maxPos = chars.length;\r\n    var str = '';\r\n    for (var i = 0; i < length; i++) {\r\n      str += chars.charAt(Math.floor(Math.random() * maxPos));\r\n    }\r\n\r\n    return str;\r\n  },\r\n\r\n  redirectTo: function (url) {\r\n    if (typeof window === 'undefined') {\r\n      console.log('Not a browser, redirect url: ' + url);\r\n      return;\r\n    }\r\n    window.location.href = url;\r\n  },\r\n\r\n  inWeixin: function () {\r\n    if (typeof navigator === 'undefined') {\r\n      return false;\r\n    }\r\n    var ua = navigator.userAgent.toLowerCase();\r\n    return ua.indexOf('micromessenger') !== -1;\r\n  },\r\n\r\n  inAlipay: function () {\r\n    if (typeof navigator === 'undefined') {\r\n      return false;\r\n    }\r\n    var ua = navigator.userAgent.toLowerCase();\r\n    return ua.indexOf('alipayclient') !== -1;\r\n  },\r\n\r\n  documentReady: function (fn) {\r\n    if (typeof document === 'undefined') {\r\n      fn();\r\n      return;\r\n    }\r\n    if (document.readyState != 'loading') {\r\n      fn();\r\n    } else {\r\n      document.addEventListener('DOMContentLoaded', fn);\r\n    }\r\n  },\r\n\r\n  loadUrlJs: function (sid, jsurl, callback) {\r\n    var nodeHead = document.getElementsByTagName('head')[0];\r\n    var nodeScript = null;\r\n    if (document.getElementById(sid) == null) {\r\n      nodeScript = document.createElement('script');\r\n      nodeScript.setAttribute('type', 'text/javascript');\r\n      nodeScript.setAttribute('src', jsurl);\r\n      nodeScript.setAttribute('id', sid);\r\n      nodeScript.async = true;\r\n      if (callback != null) {\r\n        nodeScript.onload = nodeScript.onreadystatechange = function () {\r\n          if (nodeScript.ready) {\r\n            return false;\r\n          }\r\n\r\n          if (!nodeScript.readyState || nodeScript.readyState == 'loaded'\r\n              || nodeScript.readyState == 'complete') {\r\n            nodeScript.ready = true;\r\n            callback();\r\n          }\r\n        };\r\n      }\r\n      nodeHead.appendChild(nodeScript);\r\n    } else {\r\n      if (callback != null) {\r\n        callback();\r\n      }\r\n    }\r\n  }\r\n};\r\n","module.exports = {\r\n  v: '2.1.9'\r\n};\r\n"]}